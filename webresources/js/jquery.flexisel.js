/*
 * File: jquery.flexisel.js
 * Version: 1.0.2
 * Description: Responsive carousel jQuery plugin
 * Author: 9bit Studios
 * Copyright 2012, 9bit Studios
 * http://www.9bitstudios.com
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 */
(function(e){e.fn.flexisel=function(t){var n=e.extend({visibleItems:4,animationSpeed:200,autoPlay:false,autoPlaySpeed:3e3,pauseOnHover:true,setMaxWidthAndHeight:false,enableResponsiveBreakpoints:true,clone:true,responsiveBreakpoints:{portrait:{changePoint:480,visibleItems:1},landscape:{changePoint:640,visibleItems:2},tablet:{changePoint:768,visibleItems:3}}},t);var r=e(this);var i=e.extend(n,t);var s;var o=true;var u=i.visibleItems;var a=r.children().length;var f=[];var l={init:function(){return this.each(function(){l.appendHTML();l.setEventHandlers();l.initializeItems()})},initializeItems:function(){var t=r.parent();var n=t.height();var o=r.children();l.sortResponsiveObject(i.responsiveBreakpoints);var a=t.width();s=a/u;o.width(s);if(i.clone){o.last().insertBefore(o.first());o.last().insertBefore(o.first());r.css({left:-s})}r.fadeIn();e(window).trigger("resize")},appendHTML:function(){r.addClass("nbs-flexisel-ul");r.wrap("<div class='nbs-flexisel-container'><div class='nbs-flexisel-inner'></div></div>");r.find("li").addClass("nbs-flexisel-item");var t=r.parent();if(i.setMaxWidthAndHeight){var n=e(".nbs-flexisel-item img").width();var s=e(".nbs-flexisel-item img").height();e(".nbs-flexisel-item img").css("max-width",n);e(".nbs-flexisel-item img").css("max-height",s)}e("<div class='nbs-flexisel-nav-left'></div><div class='nbs-flexisel-nav-right'></div>").insertAfter(t);if(i.clone){var o=r.children().clone();r.append(o)}},setEventHandlers:function(){var t=r.parent();var n=t.parent();var f=r.children();var c=n.find(".nbs-flexisel-nav-left");var h=n.find(".nbs-flexisel-nav-right");e(window).on("resize",function(n){l.setResponsiveEvents();var o=e(t).width();var p=e(t).height();s=o/u;f.width(s);if(i.clone){r.css({left:-s})}else{r.css({left:0})}if(!i.clone&&a<=u){c.add(h).css("visibility","hidden")}else{c.add(h).css("visibility","visible");var d=c.height()/2;var v=p/2-d;c.css("top",v+"px");h.css("top",v+"px")}});e(c).on("click",function(e){l.scrollLeft()});e(h).on("click",function(e){l.scrollRight()});if(i.pauseOnHover==true){e(".nbs-flexisel-item").on({mouseenter:function(){o=false},mouseleave:function(){o=true}})}if(i.autoPlay==true){setInterval(function(){if(o==true)l.scrollRight()},i.autoPlaySpeed)}},setResponsiveEvents:function(){var t=e("html").width();if(i.enableResponsiveBreakpoints){var n=f[f.length-1].changePoint;for(var r in f){if(t>=n){u=i.visibleItems;break}else{if(t<f[r].changePoint){u=f[r].visibleItems;break}else continue}}}},sortResponsiveObject:function(e){var t=[];for(var n in e){t.push(e[n])}t.sort(function(e,t){return e.changePoint-t.changePoint});f=t},scrollLeft:function(){if(r.position().left<0){if(o==true){o=false;var e=r.parent();var t=e.width();s=t/u;var n=r.children();r.animate({left:"+="+s},{queue:false,duration:i.animationSpeed,easing:"linear",complete:function(){if(i.clone){n.last().insertBefore(n.first())}l.adjustScroll();o=true}})}}},scrollRight:function(){var e=r.parent();var t=e.width();s=t/u;var n=s-t;var f=r.position().left+(a-u)*s-t;if(n<=Math.ceil(f)&&!i.clone){if(o==true){o=false;r.animate({left:"-="+s},{queue:false,duration:i.animationSpeed,easing:"linear",complete:function(){l.adjustScroll();o=true}})}}else if(i.clone){if(o==true){o=false;var c=r.children();r.animate({left:"-="+s},{queue:false,duration:i.animationSpeed,easing:"linear",complete:function(){c.first().insertAfter(c.last());l.adjustScroll();o=true}})}}},adjustScroll:function(){var e=r.parent();var t=r.children();var n=e.width();s=n/u;t.width(s);if(i.clone){r.css({left:-s})}}};if(l[t]){return l[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return l.init.apply(this)}else{e.error('Method "'+method+'" does not exist in flexisel plugin!')}}})(jQuery)